<html>

<head>
  <style>
    @import "compass/css3";

$readout:       rgba(75,75,75,.65);
$key-misc:      #d6d6d6;   
$key-function:  #ff8c00; 
$key-numeric:   #e0e0e0;

$readout-color: #ffffff;
$key-color:     #000000; 

body {
  font-family: "HelveticaNeue-UltraLight", "Helvetica Ultra Light", "Helvetica Neue", Helvetica, Arial, sans-serif; 
  font-weight: 100;
  background: #ffebd2;
}

sub, sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
}
 
sup {
  top: -0.5em;
}
    .calculator {
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -160px;
  margin-left: -115px;
  width: 231px;
  height: 320px;
  background: $readout;
  border-right: 1px solid #646464;
  border-bottom: 1px solid #343434;
  border-left: 1px solid #646464;
  border-top: 1px solid #939393;
  @include border-radius(6px); 
  @include single-box-shadow(0, 0, 20px, 0,rgba(50,50,50,.75), false);
  cursor: arrow;
        background: transparent;
  box-sizing: border-box;
  display: block;
  width: inherit;
  border: 0;
  margin: 28px 0 0 0;
  text-align: right;
  padding: 0 10px;
  font-family: "HelveticaNeue-UltraLight", "Helvetica Ultra Light", "Helvetica Neue", Helvetica, Arial, sans-serif; 
  font-weight: 100;
}

.keys {
  position: absolute;
  bottom: 0;
}


.row {
    }
}
.key {
  width: 57px;
  height: 47px;
  font-size: 22px;
  border: 0;
  float:left;
  margin-left: 1px;
  font-family: "HelveticaNeue-UltraLight", "Helvetica Ultra Light", "Helvetica Neue", Helvetica, Arial, sans-serif; 
  
  &.double {
    width: 115px;
    text-align: left;
    padding-left: 25px;
    @include border-bottom-left-radius(6px);    
  }
  
  &.last {
     @include border-bottom-right-radius(6px); 
    }
}

.misc {
  background: $key-misc;
  font-size: 20px;
  font-family: "HelveticaNeue-Light", "Helvetica Light", "Helvetica Neue", Helvetica, Arial, sans-serif; 
   &:active {
    background-color: darken($key-misc, 15%);
  }
}

.function {
  background: $key-function;
  color: $readout-color;
  font-size: 25px;
   &:active {
     background-color: darken($key-function, 15%);
  }
}

.numeric {
  background: $key-numeric;
  font-family: "HelveticaNeue-Light", "Helvetica Light", "Helvetica Neue", Helvetica, Arial, sans-serif; 
  &:active {
         background-color: darken($key-numeric, 15%);
  }
}
  </style>
</head>

<body>
  
  <script>
    angular.module('appleCalculator', [])
  .controller('Calculator', ['$scope', Calculator]);

function Calculator($scope) {
  $scope.console = 0;
  
  var _total = 0;
  var _state = null;
  
  function _resolveState(){
    switch(_state) {
      case 'ADD':
        _total +=  parseFloat($scope.console);
        $scope.console = 0;
        break;
      case 'SUB':
        _total -=  parseFloat($scope.console);
        $scope.console = 0;
        break;
      case 'MULT':
        _total *=  parseFloat($scope.console);
        $scope.console = 0;
        break;
      case 'DIV':
        _total /=  parseFloat($scope.console);
        $scope.console = 0;
        break;

      default:
         _total = parseFloat($scope.console);
        $scope.console = 0;
         break;
        
    }
  }  
  $scope.add = function() {
 		_resolveState();
    _state = 'ADD';
  }
  $scope.subtract = function() {
 		_resolveState();
    _state = 'SUB';
  }
  
  $scope.multiply = function() {
 		_resolveState();
    _state = 'MULT';
  }
  
  $scope.divide = function() {
 		_resolveState();
    _state = 'DIV';
  }
  
  $scope.equal = function() {
 		_resolveState();
    $scope.console = _total;
    _state = 'EQ';
  }
    
  $scope.print = function(n) {
    if($scope.console.toString() == "0" || _state == 'EQ'){
      $scope.console = "";
    }
    if( _state == 'EQ'){
      _state = null;
    }
    $scope.console = $scope.console + n;
  }
  
  $scope.changePositivity = function() {
    $scope.console = (parseFloat($scope.console) * -1).toString();
  }
  
  $scope.getPercentage = function() {
    $scope.console = (parseFloat($scope.console) * .01).toString();
  }
  
  $scope.clearTotal = function() {
    $scope.console = 0;   
    _total = 0;
    _state = null;
  }
  
}
  </script>
<div ng-app="appleCalculator">
  <div class="calculator" ng-controller="Calculator">
    <input class="readout" type='readonly' disabled ng-model="console">
    <div class="keys">
      <div class="row">
        <button class="key misc" ng-click="clearTotal()">C</button>
        <button class="key misc" ng-click="changePositivity()"><sup>+</sup>/<sub>−</sub></button>
        <button class="key misc" ng-click="getPercentage()">%</button>
        <button class="key function" ng-click="divide()">÷</button>   
      </div>
      <div class="row">
        <button class="key numeric" ng-click="print(7)">7</button>
        <button class="key numeric" ng-click="print(8)">8</button>
        <button class="key numeric" ng-click="print(9)">9</button>
        <button class="key function" ng-click="multiply()">×</button>
      </div>
      <div class="row">
        <button class="key numeric" ng-click="print(4)">4</button>
        <button class="key numeric" ng-click="print(5)">5</button>
        <button class="key numeric" ng-click="print(6)">6</button>
        <button class="key function" ng-click="subtract()">−</button>
      </div>
      <div class="row">
        <button class="key numeric" ng-click="print(1)">1</button>
        <button class="key numeric" ng-click="print(2)">2</button>
        <button class="key numeric" ng-click="print(3)">3</button>
        <button class="key function" ng-click="add()">+</button>
      </div>
      <div class="row">
        <button class="key numeric double" ng-click="print(0)">0</button>
        <button class="key numeric" ng-click="print('.')">.</button>
        <button class="key function last" ng-click="equal()">=</button>
      </div>
    </div>

  </div>
</div>
</body>

</html>
